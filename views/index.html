<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="shortcut icon" type="image/png" href="images/favicon.png" />
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css" />

  <script src="js/jquery.min.js"></script>
  <script src="js/tether.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/moment.min.js"></script>
  <script src="js/moment-timezone-with-data.min.js"></script>
  <script src="js/knockout-latest.js"></script>
  <script src="js/colorZones.js"></script>
  <script src="js/colorPicker.js"></script>
  <script src="js/renderer.js"></script>
  <script src="js/timeZoneService.js"></script>
  <script src="js/models/latLng.js"></script>
  <script src="js/models/timeZone.js"></script>
  <script src="js/models/polygon.js"></script>
</head>

<body>

  <script>
    $(document).ready(function () {
      var renderer = new Renderer();
      var timeZoneService = new TimeZoneService(renderer.width());
      var colorPicker = new ColorPicker();
      var model = new ColorZones(renderer, timeZoneService, colorPicker);
      // Figure out why I need this override here...
      ko.options.useOnlyNativeEvents = true;
      ko.applyBindings(model);
    });
  </script>

  <div id="main">
    <div id="content" class="mx-auto d-block" data-bind="style: {width: width}">
      <div id="canvasContainer" class="mb-2">
        <canvas id="theCanvas" data-bind="attr: {width: width, height: height}"></canvas>
      </div>

      <div class="mb-2">
        <div class="row text-white">
          <div class="col">
            <div class="float-right">
              <label for="opacitySlider">Opacity <span data-bind="text: opacity"></span>%</label>
              <input id="opacitySlider" type="range" min="0" max="100" data-bind="value: opacity"/>
            </div>
          </div>
          <div class="col">
            <label class="custom-control custom-checkbox no-select">
              <input type="checkbox" class="custom-control-input" data-bind="checked: showTimes">
              <span class="custom-control-indicator"></span>
              <span class="custom-control-description">Show all times</span>
            </label>
            <label class="custom-control custom-checkbox no-select">
              <input type="checkbox" class="custom-control-input" data-bind="checked: colorAllZones">
              <span class="custom-control-indicator"></span>
              <span class="custom-control-description">Color all zones</span>
            </label>
            </div>
          </div>
        </div>
      </div>

      <div id="colorControl" class="text-uppercase" style="display: none;" data-bind="with: colorPicker, visible: true"
      role="tablist" aria-multiselectable="true">
        <div class="row">
          <span class="col">
            <a data-toggle="collapse" class="btn btn-block" data-bind="css: hoursColor"
            data-parent="#colorControl" href="#hoursContainer" aria-expanded="true" aria-controls="hoursContainer">Hours</a>

            <div id="hoursContainer" class="collapse" role="tabpanel">
              <div class="card-block mt-2">
                <button class="btn btn-danger btn-block mb-2" data-bind="click: update.bind($data, 'hours', 'red')">RED</button>
                <button class="btn btn-success btn-block mb-2" data-bind="click: update.bind($data, 'hours', 'green')">GREEN</button>
                <button class="btn btn-primary btn-block mb-2" data-bind="click: update.bind($data, 'hours', 'blue')">BLUE</button>
              </div>
            </div>
          </span>

          <span class="col">
            <a data-toggle="collapse" class="btn btn-block" data-bind="css: minutesColor"
            data-parent="#colorControl" href="#minutesContainer" aria-expanded="true" aria-controls="minutesContainer">Minutes</a>

            <div id="minutesContainer" class="collapse" role="tabpanel">
              <div class="card-block mt-2">
                <button class="btn btn-danger btn-block mb-2" data-bind="click: update.bind($data, 'minutes', 'red')">RED</button>
                <button class="btn btn-success btn-block mb-2" data-bind="click: update.bind($data, 'minutes', 'green')">GREEN</button>
                <button class="btn btn-primary btn-block mb-2" data-bind="click: update.bind($data, 'minutes', 'blue')">BLUE</button>
              </div>
            </div>
          </span>

          <span class="col">
            <a data-toggle="collapse" class="btn btn-block" data-bind="css: secondsColor"
            data-parent="#colorControl" href="#secondsContainer" aria-expanded="true" aria-controls="secondsContainer">Seconds</a>

            <div id="secondsContainer" class="collapse" role="tabpanel">
              <div class="card-block mt-2">
                <button class="btn btn-danger btn-block mb-2" data-bind="click: update.bind($data, 'seconds', 'red')">RED</button>
                <button class="btn btn-success btn-block mb-2" data-bind="click: update.bind($data, 'seconds', 'green')">GREEN</button>
                <button class="btn btn-primary btn-block mb-2" data-bind="click: update.bind($data, 'seconds', 'blue')">BLUE</button>
              </div>
            </div>
          </span>
        </div>
      </div>
  </div>
</body>

</html>